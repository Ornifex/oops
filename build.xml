<!--
    This program (working title: MAS Prover) is an automated tableaux prover
    for epistemic logic (S5n).
    Copyright (C) 2007  Elske van der Vaart and Gert van Valkenhoef

    This program is free software; you can redistribute it and/or modify it
    under the terms of the GNU General Public License version 2 as published
    by the Free Software Foundation.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License along
    with this program; if not, write to the Free Software Foundation, Inc.,
    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
-->
<project name="MAS" default="dist" basedir=".">
	<!-- set global properties for this build -->
	<property name="src" location="src"/>
	<property name="build" location="build"/>
	<property name="dist"  location="dist"/>
	<property name="docs" location="docs"/>

	<!-- global definition of the classpath -->
	<path id="project.class.path">
		<pathelement location="build/"/>
		<pathelement path="${java.class.path}/"/>
	</path>

	<taskdef name="sablecc" classname="org.sablecc.ant.taskdef.Sablecc">
	</taskdef>
	
	<target name="init">
		<!-- Create the time stamp -->
		<tstamp/>
		<!-- Create the build directory structure used by compile -->
		<mkdir dir="${build}"/>
	</target>

	<target name="all" depends="prover">
	</target>

	<target name="clean" depends="clean-prover">
		<delete dir="${build}" />
	</target>

	<target name="dist-clean" depends="clean">
		<delete dir="${dist}" />
		<delete dir="${docs}" />
	</target>

	<!-- PROVER build targets here -->
	<target name="prover" depends="prover-grammar">
		<javac srcdir="${src}" destdir="${build}" includes="nl/rug/ai/mas/prover/**" debug="true">
			<classpath path="${project.class.path}" />
		</javac>
	</target>

	<target name="prover-grammar" depends="init,clean-prover-grammar">
		<sablecc src="${src}/grammars/" includes="*.sablecc, *.grammar"
         outputdirectory="${src}"></sablecc>
		<copy todir="${build}">
		  <fileset dir="${src}">
			 <include name="**/*.dat"/>
			 <include name="**/*.txt"/>
		  </fileset>
		</copy>
	</target>

	<!-- cleaning tasks in addition to removing ${build} -->
	<target name="clean-prover" depends="clean-prover-grammar" />
	<target name="clean-prover-grammar">
		<delete dir="${src}/nl/rug/ai/mas/prover/parser/" />
	</target>

	<!-- create jar file -->
	<target name="dist" depends="all">
		<mkdir dir="${dist}"/>
		<jar jarfile="${dist}/mas.jar" basedir="${build}"/>
	</target>

	<target name="docs">
		<mkdir dir="${docs}" />
		<javadoc sourcepath="${src}" access="private" destdir="${docs}" 
			packageNames="nl.rug.ai.mas.*"/>
	</target>
</project>
